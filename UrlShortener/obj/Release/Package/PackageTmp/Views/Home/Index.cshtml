<!DOCTYPE html>

<html class="wf-proximanova-n6-active wf-brandongrotesque-n5-active wf-proximanova-n4-active wf-brandongrotesque-n4-active wf-proximanova-n3-active wf-brandongrotesque-n7-active wf-active">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Bitly Copy | URL Shortener and Link Management Platform</title>

    <link rel="icon" type="image/png" href="https://dl6fh5ptkejqa.cloudfront.net/0482a3c938673192a591f2845b9eb275.png">

    <link href="~/Css/main.css" rel="stylesheet" type="text/css">

    <style type="text/css">
        .tk-proxima-nova {
            font-family: "proxima-nova",sans-serif;
        }

        .tk-brandon-grotesque {
            font-family: "brandon-grotesque",sans-serif;
        }
    </style>

</head>
<body class="one-or-more-links">
    <div class="stage">

        <header id="header" data-template="stage-header" class="">
            <div id="header-inner" class="">
                <div class="container container-pod container-pod-short">

                    <nav class="navigation" role="navigation">
                        <ul>
                            <li><a href="#">Tour</a></li>
                            <li><a href="#">Enterprise</a></li>
                            <li><a href="#">Resources</a></li>
                            <li><a href="#">Blog</a></li>
                            <li><a href="#">About</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </header>

        <div id="container" class="clearfix">

            <div class="container container-pod shorten-container">
                <h1 class="page-title t-center">Bitly Copy .To prove It Works..</h1>
                <div class="join-bitly t-center">Measure technical Understanding of creating a similar copy of Bitly</div>
                
                <div id="form_container" class="t-center mid-container foot-room">
                    <fieldset class="cf">
                        <input id="shorten_url" type="text" taborder="1" name="url" class="shorten-input" placeholder="Paste a link to shorten it" value="" autocomplete="off" autocorrect="off" autocapitalize="off">
                        <input id="shorten_btn" type="submit" class="button button-primary button-large shorten-button" value="Shorten">
                    </fieldset>

                    <div id="shorten_actions">
                    </div>
                </div>

                <div class="link-container mid-container">
                    <div id="shortened_info">
                        <ul id="most_recent_link" class="anon_history footroom"></ul>
                    </div>
                    <div>
                        <ul id="anon_history" class="anon_history" style="display: block; overflow: hidden;"></ul>
                    </div>
                </div>
            </div>

        </div>

    </div>

    <script type="text/javascript" src="~/js/jquery.min.js"></script>


    <script type="text/javascript">
        (function () {

            $("#shorten_url").focus();

            $("#shorten_btn").on("click", function () {

                var urlInputText = $("#shorten_url").val()
                var pattern = /^https?:\/\//i;
                if (!pattern.test(urlInputText)) {


                    urlInputText = "http://" + urlInputText;
                    $("#shorten_url").val(urlInputText);

                }

                if (!isUrlValid($("#shorten_url").val())) {

                    alert($("#shorten_url").val() + " is not valid url");
                    return;
                }
                $.ajax({
                    type: "POST",
                    url: "/api/UrlShrinker",
                    data: JSON.stringify($("#shorten_url").val()),
                    contentType: 'application/json',
                    success: function (result) {
                        var template = "<li class='shortened_link'>";
                        template += "<div class='unauth-title-url'><a class='article-title smaller' href=" + result.OriginalUrl + "> " + result.OriginalUrl.replace("http://","").replace("https://","") + "</a></div>";
                        template += "<div class='unauth_capsule clearfix'><a class='short-url' href=" + result.ShortenRedirectUrl + ">" + result.ShortenRedirectUrl + "</a></div>";
                        template += "</li>"

                        $("#anon_history").append(template);
                    }
                })

            });

            function isUrlValid(url) {
                return /^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@@)|\/|\?)*)?$/i.test(url);

            }


        })();
    </script>


</body>
</html>